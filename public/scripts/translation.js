const translations = {
  "pt-br": {
    "index": "Início",
    "education": "Educação",
    "work": "Experiência Profissional",
    "projects": "Projetos",
    "presentation": "Apresentação",
    "about": [
      "Sou formado em Ciência da Computação e tenho mais de 3 anos de experiência \
        no setor de TI, com foco no desenvolvimento de API, web & mobile.",
      "Estou trabalhando como desenvolvedor full-stack na Empresa Sergipana de Tecnologia de Informação (EMGETIS), onde \
        desenvolvo novas funcionalidades para sites de órgãos governamentais e responsável pelo desenvolvimento do app \"Gol \
        da Gente\" (API, Android, iOS e Web), cujo objetivo é trocar NFe's por ingressos de eventos esportivos.",
      "Também tenho familiaridade com Kanban e posso auxiliar em traduções textuais de Inglês (en) para Português Brasileiro (pt-BR).",
    ],
    "roles": [
      "Desenvolvedor Full-Stack",
      "Desenvolvedor Web",
      "Desenvolvedor Mobile",
      "Tradutor"
    ],
    "education_1": {
      "title": "Bacharelado em Ciência da Computação pela Universidade Tiradentes - UNIT.",
      "period": "jan. 2018 - ago. 2023",
    },
    "work_1": {
      "title": "Desenvolvedor Full-Stack, EMGETIS.",
      "period": "ago. 2021 - até o momento",
      "info": [
        "(alocado na ARSIN)",
        "Desenvolvimento e manutenção (+32 sites) com o CMS WordPress \
          e a stack <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>. \
          Implementação do Composer \
          para gerenciamento de dependências dos temas desses sites, \
          o integrando com o Bower e o NPM. Melhorias de segurança.",
        "Criação de shortcodes e blocos customizados, \
          além da implementação e configuração de alguns plugins (ACF, Ninja Forms, entre outros) para sites WordPress \
          buscando melhorar a experiência do usuário, \
          e realização de alguns webscraping.",
        "Implementação do Git com Gitea para versionamento do código \
          e criação de script CI/CD com Gitea Actions para envio de alterações relacionadas ao tema WordPress de \
          ambiente de \"dev.\" pra ambiente de \"prod.\".",
        "Desenvolvimento com React Native do app mobile \"Gol da Gente\" \
          e disponibilização em lojas virtuais (Google Play Store e Apple App Store). \
          Desenvolvimento da API p/ o app com JS/TS, aplicando conceitos como MVC, patterns como Middleware e Repository \
          e a integrando com a API da SEFAZ-SE, do gov.br, do IBGE e com o webservice do ViaCEP (json). \
          O SGBD selecionado foi o PostgreSQL principalmente pela sua eficiência \
          e foi realizado o <i>port</i> do app para versão web.",
        "Customização visual com twig e das notificações por e-mail do GLPI.",
        "Desenvolvimento de aplicação com Angular, Bootstrap 5, Golang e Docker Compose.",
        "Prototipação com o software Lunacy."
      ],
    },
    "work_2": {
      "title": "Estagiário de TI, EMGETIS.",
      "period": "dez. 2019 - ago. 2021",
      "info": [
        "Desenvolvimento e manutenção de alguns sites com o CMS WordPress e a stack \
          <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>.",
        "Atendimento de chamados pelo GLPI, \
          além do suporte ao usuário em sistemas do Detran <i>(emulador)</i> \
          e dos softwares de gerenciamento de e-mail \"Expresso Livre\" e \"Zimbra\".",
        "Visão geral do software de monitoramento \"Zabbix\" e do Ansible.",
        "Backup de base de dados <abbr title=\"Microsoft SQL Server\">mssql</abbr> utilizando o \
          <abbr title=\"Server Management Studio\">SMSS</abbr> e o RDesktop para acesso remoto a máquina."
      ]
    }
  },
  "en": {
    "index": "Home",
    "education": "Education",
    "work": "Work Experience",
    "projects": "Projects",
    "presentation": "About",
    "about": [
      "I'm graduated in Computer Science and I have more than three years of experience \
        in IT sector, mainly in API, web & mobile development.",
      "I'm working as full-stack developer at EMGETIS, where I \
        develop new features for public authority websites and e responsible for the development of the app \"Gol \
        da Gente\" (API, Android, iOS e Web), whose objective is to exchange NF-e's for sporting events tickets.",
      "I'm also familiar with Kanban and can help with textual translations from English (en) to Brazilian Portuguese (pt-BR).",
    ],
    "roles": [
      "Full-Stack Developer",
      "Web Developer",
      "Mobile Developer",
      "Translator"
    ],
    "education_1": {
      "title": "Bachelor's degree in Computer Science from Tiradentes University - UNIT",
      "period": "jan. 2018 - aug. 2023",
    },
    "work_1": {
      "title": "Full-Stack Developer, EMGETIS.",
      "period": "aug. 2021 - until now",
      "info": [
        "(allocated at ARSIN)",
        "Development and maintenance (+32 sites) with the WordPress CMS \
          and the <abbr title=\"Linux, Apache2, MariaDB and PHP\">LAMP</abbr>. \
          Composer implementation for theme dependency management of these sites, \
          integrating it with Bower and NPM. Security improvements.",
        "Creation of shortcodes and custom blocks,\
          in addition to implementation and configuration of some plugins (ACF, Ninja Forms, among others) for WordPress websites \
          focus to improve the user experience (UX), \
          and doing some webscraping.",
        "Git implementation with Gitea for code versioning\
          and creating CI/CD script with Gitea Actions to send changes related to the WordPress theme from \
          \"dev.\" environment to \"prod.\" environment.",
        "Development with React Native of the mobile app \"Gol da Gente\" \
          and availability in virtual stores (Google Play Store and Apple App Store).\
          API development for with JS/TS, applying concepts such as MVC, patterns as Middleware and Repository, \
          and integrating it with the SEFAZ-SE API, gov.br, IBGE and the ViaCEP webservice (json). \
          The selected DBMS was PostgreSQL mainly due to its efficiency\
          and was realized the <i>port</i> of app to the web version.",
        "Visual customization with twig and email notifications of the GLPI.",
        "Development of application with Angular, Bootstrap 5, Golang and Docker Compose.",
        "Prototyping with Lunacy software."
      ],
    },
    "work_2": {
      "title": "IT Intern, EMGETIS.",
      "period": "dec. 2019 - aug. 2021",
      "info": [
        "Development and maintenance of some websites with the WordPress CMS and the \
          <abbr title=\"Linux, Apache2, MariaDB and PHP\">LAMP</abbr> stack.",
        "Answer requests using GLPI, \
          in addition to user support on Detran systems <i>(emulator)</i>, \
          and of e-mail management softwares \"Expresso Livre\" and \"Zimbra\".",
        "Overview of monitoring software \"Zabbix\" and Ansible.",
        "Backup database <abbr title=\"Microsoft SQL Server\">mssql</abbr> using \
        <abbr title=\"Server Management Studio\">SMSS</abbr> and RDesktop for remote access to the machine."
      ]
    }
  }
}

let userLang = (navigator.language || navigator.userLanguage).toLowerCase();
if (!["en", "pt-br"].includes(userLang)) {
  // fallback
  userLang = "en";
}
document.documentElement.lang = userLang;

function NativeTemplate() {
  const htmlContent = document.body.innerHTML;
  const fmtContent = htmlContent.replace(/\{\{(.*?)\}\}/g, (_, key) => {
    key = key.trim();
    const valueArr = key.split('.');
    let arrOption;

    const getOption = (str) => str.match(/\[([^\]]+)\]/);
    const hasOptions = (arr) => ![null, undefined].includes(arr);
    const clearOption = (str) => str.replace(/\[.*?\]/g, '');

    if (valueArr.length == 2) {
      arrOption = getOption(valueArr[1]);
      if (hasOptions(arrOption)) {
        valueArr[1] = clearOption(valueArr[1])
        return translations[userLang][valueArr[1]][parseInt(arrOption[1])];
      }
    }

    if (valueArr.length == 3) {
      arrOption = getOption(valueArr[2]);
      if (hasOptions(arrOption)) {
        valueArr[2] = clearOption(valueArr[2])
        return translations[userLang][valueArr[1]][valueArr[2]][parseInt(arrOption[1])];
      }
    }

    if (valueArr.length <= 2) {
      return translations[userLang][valueArr[1]];
    } else {
      return translations[userLang][valueArr[1]][valueArr[2]];
    }
  });
  document.body.innerHTML = fmtContent;
}

NativeTemplate();