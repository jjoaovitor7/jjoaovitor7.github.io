const translations = {
  "pt-br": {
    "index": "Início",
    "education": "Educação",
    "work": "Experiência Profissional",
    "projects": "Projetos",
    "presentation": "Apresentação",
    "about": [
      "Graduado em Ciência da Computação e tenho mais de 4 anos de experiência \
        no setor de TI, com foco no desenvolvimento de API, web & mobile.",
      "No momento trabalho como dev., desenvolvendo novas funcionalidades para sites de órgãos governamentais, \
       e apps mobile como o \"Gol da Gente\" (API, Android, iOS e Web), \
        cujo objetivo é trocar NFe's por ingressos para eventos esportivos.",
      "Além disso, também tenho familiaridade com Kanban \
      e posso auxiliar em traduções textuais de Inglês (en) para Português Brasileiro (pt-BR).",
    ],
    "roles": [
      "Desenvolvedor Full-Stack",
      "Desenvolvedor Web",
      "Desenvolvedor Mobile",
      "Tradutor"
    ],
    "educations": [
      {
        "title": "Bacharelado em Ciência da Computação pela Universidade Tiradentes - UNIT.",
        "period": "jan. 2018 - ago. 2023",
      }
    ],
    "works": [
      {
        "title": "Estagiário de TI, EMGETIS.",
        "period": "dez. 2019 - ago. 2021",
        "info": [
          "Atuei no desenvolvimento e manutenção de sites WordPress com a stack \
            <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>, \
            além do suporte à usuários em sistemas do Detran <i>(emulador)</i> \
            e em softwares de e-mail \"Expresso Livre\" e \"Zimbra\", acompanhando e atendendo os chamados através do GLPI. \
            Obtive uma visão geral do software de monitoramento \"Zabbix\" \
            e realizei backup de base de dados <abbr title=\"Microsoft SQL Server\">mssql</abbr> \
            usando o <abbr title=\"Server Management Studio\">SMSS</abbr> e acesso remoto via RDesktop."
        ]
      },
      {
        "title": "Desenvolvedor Full-Stack, EMGETIS.",
        "period": "ago. 2021 - jan. 2025 ",
        "info": [
          "(alocado na ARSIN)",
          "Atuei no desenvolvimento e manutenção de mais de 32 sites WordPress com a stack \
        <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>, \
        incluindo: \
          implementação do Composer, o integrando com o Bower e o NPM para gerenciar dependências dos temas, \
          criação de shortcodes, blocos customizados e \
          configuração de alguns plugins (ACF, Ninja Forms, entre outros) buscando melhorar a \
          <abbr title=\"Experiência do Usuário\">UX</abbr>, \
          melhorias de segurança e webscraping.",
          "Implementação do Git com Gitea para versionamento do código.",
          "Desenvolvi o app mobile \"Gol da Gente\" com o framework React Native \
          e disponibilizei em lojas virtuais (Google Play Store [\"hoje\" com mais de 10.000 downloads] e Apple App Store), \
          utilizando contas de desenvolvedor pré-configuradas. \
          Desenvolvi a API p/ o app com JS/TS e PostgreSQL (pela sua eficiência), \
          aplicando conceitos como arquitetura MVC, patterns como Middleware e Repository, \
          e a integrando com a API da SEFAZ-SE, do gov.br (OAuth), do IBGE e com o webservice do ViaCEP <i>(json)</i>. \
          Realizei o <i>port</i> do app para versão web.",
          "Desenvolvimento de aplicação com Angular, Bootstrap 5, Golang e Docker Compose.",
          "Desenvolvi o app mobile \"SAP - SE\" (Sistema de Administração Penitenciária [SAP] do Estado de Sergipe [SE]) com o framework React Native \
          utilizando a API do SAP da SEJUC e conceitos como redux, contracts, entre outros. Prototipação com o software Lunacy."
        ]
      },
      {
        "title": "Analista de Sistemas, ZDoc.",
        "period": "jan. 2025 - até o momento",
        "info": [
          "Implementação da especificação do TCE, Serigy Schema, em sites governamentais que utilizam o WordPress, \
          aplicando conceitos como template-pages, metabox, custom post type (CPT) e integrando com o plugin ACF. \
          Migração de +8.000 dados de fontes variadas com TS, utilizando desde arquivos estruturados como .csv, .json, .xlsx, entre outros, até webscraping, \
          reduzindo o \"trabalho braçal\" / inserção manual dos dados.",
          "Implementei testes unitários de API com Playwright e BDD (com Gherkin), aumentando a confiabilidade da API e agilidade nos testes.",
          "Documentei a API com a especificação Swagger, como também realizei a integração entre o Swagger e os padrões JWT e OAuth2.",
          "Manutenção e desenvolvimento de novas funcionalidades para sites governamentais com a stack \
          <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>, \
          para apps mobile com React Native, e API's.",
        ]
      }
    ],
  },
  "en": {
    "index": "Home",
    "education": "Education",
    "work": "Work Experience",
    "projects": "Projects",
    "presentation": "About",
    "about": [
      "I'm graduated in Computer Science and I have more than 4 years of experience \
        in IT sector, mainly in API, web & mobile development.",
      "I currently work as developer, \
        developing new features for public authority websites, \
       and mobile applications such as \"Gol da Gente\" (API, Android, iOS and Web), \
        whose objective is to exchange NF-e's for sporting events tickets.",
      "Additionally, I'm also familiar with Kanban\
        and can help with textual translations from English (en) to Brazilian Portuguese (pt-BR)."
    ],
    "roles": [
      "Full-Stack Developer",
      "Web Developer",
      "Mobile Developer",
      "Translator"
    ],
    "educations": [
      {
        "title": "Bachelor's degree in Computer Science from Tiradentes University - UNIT",
        "period": "jan. 2018 - aug. 2023",
      }
    ],
    "works": [
      {
        "title": "IT Intern, EMGETIS.",
        "period": "dec. 2019 - aug. 2021",
        "info": [
          "I worked on the development and maintenance of WordPress sites using the \
          <abbr title=\"Linux, Apache2, MariaDB, and PHP\">LAMP</abbr> stack, \
          as well as providing support to users of Detran systems <i>(emulator)</i> \
          and email software \"Expresso Livre\" and \"Zimbra\", tracking and attending tickets through GLPI. \
          I obtained an overview of the monitoring software \"Zabbix\" \
          and also performed <abbr title=\"Microsoft SQL Server\">mssql</abbr> database backups \
          using <abbr title=\"Server Management Studio\">SMSS</abbr> and remote access via RDesktop."
        ]
      },
      {
        "title": "Full-Stack Developer, EMGETIS.",
        "period": "aug. 2021 - jan. 2025",
        "info": [
          "(allocated at ARSIN)",
          "I worked on the development and maintenance of over 32 WordPress sites using the \
          <abbr title=\"Linux, Apache2, MariaDB and PHP\">LAMP</abbr> stack, \
          including: \
            implementing Composer and integrating it with Bower and NPM to manage theme dependencies, \
            creating shortcodes, custom blocks and \
            configuring plugins (ACF, Ninja Forms, among others) to improve the <abbr title=\"User Experience\">UX</abbr>, \
            security improvements, and web scraping.",
          "Git implementation with Gitea for code versioning.",
          "I developed the \"Gol da Gente\" mobile app using React Native framework \
          and I deployed in virtual stores (Google Play Store [\"today\" with over 10.000 downloads] and Apple App Store), \
          using pre-configured developer accounts.\
          I developed the API with JS/TS and PostgreSQL (through its efficience), \
          applying concepts such as MVC architecture, patterns as Middleware and Repository, \
          integrating it with the SEFAZ-SE API, gov.br (OAuth), IBGE and the ViaCEP <i>(json)</i>. \
          I perfomed the <i>port</i> of app to the web version.",
          "Development of application with Angular, Bootstrap 5, Golang and Docker Compose.",
          "I developed the mobile app \"SAP - SE\" (Penitentiary Administration System of Sergipe State) with React Native framework \
          using SEJUC SAP API and concepts as redux, contracts, among others. Prototyping with Lunacy software."
        ],
      },
      {
        "title": "Systems Analyst, ZDoc.",
        "period": "jan. 2025 - until now",
        "info": [
          "Implementation of the TCE specification, Serigy Schema, on government websites using WordPress, \
          applying concepts such as template-pages, metaboxes, custom post types (CPT), and integrating with the ACF plugin. \
          Migration over 8.000 data from various sources with TS, using structured files such as .csv, .json, .xlsx, and others, even webscraping, \
          decreasing the \"manual work\" / manual data entry.",
          "I Implemented API unit tests with Playwright and BDD (with Gherkin), increasing API reliability and test agility.",
          "I documented API using the Swagger specification and integrated Swagger with the JWT and OAuth2 standards.",
          "Maintenance and development of new features for government websites using the \
          <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>, \
          mobile apps using React Native, and API's.",
        ]
      }
    ]
  }
}

let userLang = (navigator.language || navigator.userLanguage).toLowerCase();
if (!["en", "pt-br"].includes(userLang)) {
  // fallback
  userLang = "en";
}
document.documentElement.lang = userLang;

const extractIndex = (str) => {
  const match = str.match(/\[([^\]]+)\]/);
  return match ? parseInt(match[1]) : null;
};

const removeIndex = (str) => str.replace(/\[.*?\]/g, '');

function NativeTemplate() {
  const htmlContent = document.body.innerHTML;

  const fmtContent = htmlContent.replace(/\{\{(.*?)\}\}/g, (_, key) => {
    key = key.trim();
    const parts = key.split('.');
    let extractedIndex;

    let translationRef = translations[userLang];

    for (let i = 1; i < parts.length; i++) {
      extractedIndex = extractIndex(parts[i]);
      let _key = removeIndex(parts[i]);

      if (typeof translationRef === "object" && _key in translationRef) {
        translationRef = translationRef[_key];
      }

      if (extractedIndex !== null && Array.isArray(translationRef)) {
        translationRef = translationRef[extractedIndex];
      }
    }

    return translationRef;
  });

  document.body.innerHTML = fmtContent;
}

NativeTemplate();