const translations = {
  "pt-br": {
    "index": "Início",
    "education": "Educação",
    "work": "Experiência Profissional",
    "projects": "Projetos",
    "presentation": "Apresentação",
    "about": [
      "Bacharel em Ciência da Computação e desenvolvedor com mais de 4 anos de experiência nos escopos de APIs, web e mobile.",
      "No momento atual, desenvolvo sites com WordPress <i>(LAMP stack)</i>, \
      sistemas com TypeScript, Java (ou PHP) e Angular, \
      e apps mobile com React Native <i>(e.g. Gol da Gente)</i> e Kotlin, \
      desde a prototipagem <i>(utilizando o software open-source Lunacy)</i> até o deploy com o Docker.",
      "Adicionalmente, possuo experiência com Kanban.",
    ],
    "roles": [
      "Desenvolvedor Full-Stack",
      "Desenvolvedor Web",
      "Desenvolvedor Mobile",
      "Tradutor"
    ],
    "educations": [
      {
        "title": "Bacharelado em Ciência da Computação pela Universidade Tiradentes - UNIT.",
        "period": "jan. 2018 - ago. 2023",
      }
    ],
    "works": [
      {
        "title": "Estagiário de TI, EMGETIS.",
        "period": "dez. 2019 - ago. 2021",
        "info": [
          "Atuei no desenvolvimento e manutenção de sites WordPress com a stack \
            <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>. \
          Prestei suporte à usuários em sistemas do Detran <i>(emulador)</i> \
            e em softwares de gerenciamento de e-mail, acompanhando e atendendo chamados via sistema corporativo. \
          Obtive uma visão geral do software de monitoramento \"Zabbix\". \
          Realizei backup de base de dados \
            <abbr title=\"Microsoft SQL Server\">mssql</abbr> \
            com o <abbr title=\"Server Management Studio\">SMSS</abbr> via RDesktop."
        ]
      },
      {
        "title": "Desenvolvedor Full-Stack, EMGETIS.",
        "period": "ago. 2021 - jan. 2025 ",
        "info": [
          "(alocado na ARSIN - Área de Sistemas e Informações)",
          "Atuei no desenvolvimento e manutenção de mais de 32 sites WordPress com a stack \
          <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>, \
          incluindo: \
            implementação do Composer, o integrando com o Bower e o NPM para gerenciar dependências dos temas, \
            criação de shortcodes, blocos customizados e \
            configuração de alguns plugins (ACF, Ninja Forms, entre outros) buscando melhorar a \
            <abbr title=\"Experiência do Usuário\">UX</abbr>, \
            melhorias de segurança e webscraping.",
          "Implementei o Git com Gitea para versionamento de código, garantindo rastreabilidade e segurança.",
          "Desenvolvi o app mobile \"Gol da Gente\" com o framework React Native \
            e disponibilizei em lojas virtuais (Google Play Store [\"hoje\" com mais de 10.000 downloads] e Apple App Store), \
            utilizando contas de desenvolvedor pré-configuradas. \
          Desenvolvi a API p/ o app com JS/TS e PostgreSQL (pela sua eficiência), \
            aplicando conceitos como arquitetura MVC, patterns como Middleware e Repository, \
            e a integrando com a API da SEFAZ-SE, do gov.br (OAuth), do IBGE e com o webservice do ViaCEP <i>(json)</i>. \
          Realizei o <i>port</i> do app para versão web.",
          "Desenvolvimento de aplicação com Angular, Bootstrap 5, Golang e Docker Compose.",
          "Desenvolvi o app mobile \"SAP - SE\" (Sistema de Administração Penitenciária [SAP] do Estado de Sergipe [SE]) com o framework React Native \
            utilizando a API do SAP da SEJUC e conceitos como redux, contracts, entre outros. Prototipação com o software Lunacy."
        ]
      },
      {
        "title": "Analista de Sistemas, ZDoc.",
        "period": "jan. 2025 - até o momento",
        "info": [
          "Atuei na implementação da especificação do TCE, Serigy Schema, em sites governamentais que utilizam o WordPress, \
            aplicando conceitos como template-pages, metabox, custom post type (CPT) e integrando com o plugin ACF. \
          Adicionalmente, migrei +8.000 dados de fontes variadas \
           <i>(desde arquivos estruturados como .csv, .json, .xlsx, entre outros, até webscraping)</i> com TypeScript, \
            reduzindo o \"trabalho braçal\" / inserção manual dos dados.",
          "Implementei testes funcionais de API com Playwright e BDD (com Gherkin), aumentando a confiabilidade da API e agilidade nos testes. \
          Documentei a API com a especificação Swagger, como também realizei a integração entre o Swagger e os padrões JWT e OAuth2.",
          "Manutenção e desenvolvimento de novas funcionalidades para sites governamentais com a stack \
            <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>, \
            para apps mobile com React Native, e API's.",
          "Refatorei código Java para Kotlin, seguindo recomendação oficial do React Native 0.73+."
        ]
      }
    ],
  },
  "en": {
    "index": "Home",
    "education": "Education",
    "work": "Work Experience",
    "projects": "Projects",
    "presentation": "About",
    "about": [
      "Bachelor in Computer Science and a developer with over 4 years of experience in the scopes of APIs, web, and mobile.",
      "Currently, I develop websites with WordPress <i>(LAMP stack)</i>, \
        systems using TypeScript, Java (or PHP) and Angular, \
        and mobile apps with React Native <i>(e.g. Gol da Gente)</i> and Kotlin, \
        from prototyping <i>(using the open-source software Lunacy)</i> to deployment with Docker.",
      "Additionally, I have experience with Kanban."
    ],
    "roles": [
      "Full-Stack Developer",
      "Web Developer",
      "Mobile Developer",
      "Translator"
    ],
    "educations": [
      {
        "title": "Bachelor's degree in Computer Science from Tiradentes University - UNIT",
        "period": "jan. 2018 - aug. 2023",
      }
    ],
    "works": [
      {
        "title": "IT Intern, EMGETIS.",
        "period": "dec. 2019 - aug. 2021",
        "info": [
          "I worked on the development and maintenance of WordPress sites using the \
            <abbr title=\"Linux, Apache2, MariaDB, and PHP\">LAMP</abbr> stack.\
          I provided user support for Detran systems <i>(emulator)</i> \
            and email management software, tracking and attending tickets via corporate system. \
          I obtained an overview of the monitoring software \"Zabbix\". \
          I perfomed \
            <abbr title=\"Microsoft SQL Server\">mssql</abbr> database backups \
            with <abbr title=\"Server Management Studio\">SMSS</abbr> via RDesktop."
        ]
      },
      {
        "title": "Full-Stack Developer, EMGETIS.",
        "period": "aug. 2021 - jan. 2025",
        "info": [
          "(allocated at ARSIN - Systems and Information Sector)",
          "I worked on the development and maintenance of over 32 WordPress sites using the \
            <abbr title=\"Linux, Apache2, MariaDB and PHP\">LAMP</abbr> stack, \
          including: \
            implementing Composer and integrating it with Bower and NPM to manage theme dependencies, \
            creating shortcodes, custom blocks and \
            configuring plugins (ACF, Ninja Forms, among others) to improve the <abbr title=\"User Experience\">UX</abbr>, \
            security improvements, and web scraping.",
          "I implemented Git with Gitea for code versioning, ensuring tracking and security.",
          "I developed the \"Gol da Gente\" mobile app using React Native framework \
            and I deployed in virtual stores (Google Play Store [\"today\" with over 10.000 downloads] and Apple App Store), \
            using pre-configured developer accounts.\
          I developed the API with JS/TS and PostgreSQL (through its efficience), \
            applying concepts such as MVC architecture, patterns as Middleware and Repository, \
            integrating it with the SEFAZ-SE API, gov.br (OAuth), IBGE and the ViaCEP <i>(json)</i>. \
          I perfomed the <i>port</i> of app to the web version.",
          "Development of application with Angular, Bootstrap 5, Golang and Docker Compose.",
          "I developed the mobile app \"SAP - SE\" (Penitentiary Administration System of Sergipe State) with React Native framework \
            using SEJUC SAP API and concepts as redux, contracts, among others. Prototyping with Lunacy software."
        ],
      },
      {
        "title": "Systems Analyst, ZDoc.",
        "period": "jan. 2025 - until now",
        "info": [
          "I worked on implementation of the TCE specification, Serigy Schema, on government websites using WordPress, \
          applying concepts such as template-pages, metaboxes, custom post types (CPT), and integrating with the ACF plugin. \
          Additionally, I migrated over 8.000 data from various sources <i>(structured files such as .csv, .json, .xlsx, and others, even webscraping)</i> with TS, \
          decreasing the \"manual work\" / manual data entry.",
          "I Implemented API functional tests with Playwright and BDD (with Gherkin), increasing API reliability and test agility. \
          I documented API using the Swagger specification and integrated Swagger with the JWT and OAuth2 standards.",
          "Maintenance and development of new features for government websites using the \
          <abbr title=\"Linux, Apache2, MariaDB e PHP\">LAMP</abbr>, \
          mobile apps using React Native, and API's.",
          "Refactored Java code to Kotlin, following the official React Native 0.73+ recommendation."
        ]
      }
    ]
  }
}

let userLang = (navigator.language || navigator.userLanguage).toLowerCase();
if (!["en", "pt-br"].includes(userLang)) {
  // fallback
  userLang = "en";
}
document.documentElement.lang = userLang;

const extractIndex = (str) => {
  const match = str.match(/\[([^\]]+)\]/);
  return match ? parseInt(match[1]) : null;
};

const removeIndex = (str) => str.replace(/\[.*?\]/g, '');

function NativeTemplate() {
  const htmlContent = document.body.innerHTML;

  const fmtContent = htmlContent.replace(/\{\{(.*?)\}\}/g, (_, key) => {
    key = key.trim();
    const parts = key.split('.');
    let extractedIndex;

    let translationRef = translations[userLang];

    for (let i = 1; i < parts.length; i++) {
      extractedIndex = extractIndex(parts[i]);
      let _key = removeIndex(parts[i]);

      if (typeof translationRef === "object" && _key in translationRef) {
        translationRef = translationRef[_key];
      }

      if (extractedIndex !== null && Array.isArray(translationRef)) {
        translationRef = translationRef[extractedIndex];
      }
    }

    return translationRef;
  });

  document.body.innerHTML = fmtContent;
}

NativeTemplate();
